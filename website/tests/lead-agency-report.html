<html>
  <head>
    <title>Lead Agency Report Embed Test</title>
    <link rel="stylesheet" href="../src/index.css" />
  </head>

  <script>
    window.addEventListener('iframe-is-listening', () => {
      console.log('window loaded');
      const iframe = document.querySelector('iframe');

      iframe.contentWindow.postMessage(
        {
          data: {
            ID: 'a0123456789ABCDE', // test spill record Id
            UTM_X: 420304,
            UTM_Y: 4511432,
          },
          iframeId: '1234',
        },
        'http://localhost:5173',
      );
    });

    window.addEventListener('message', (event) => {
      if (!event.data.iframeId) {
        return;
      }

      console.log('salesforce: event from iframe', JSON.stringify(event.data, null, 2));
    });
  </script>

  <body class="">
    <div class="h-[66px] w-full bg-emerald-600 md:h-[144px]">header</div>
    <div class="flex flex-col md:flex-row">
      <div class="flex-1 flex-col">
        <div class="h-[600px]">
          <iframe
            src="./?embedded=true&readonly=true&flowpath=true"
            style="border-color: rgb(201, 201, 201); border-width: 1px; border-style: solid"
            width="100%"
            height="100%"
            frameborder="0"
            scrolling="no"
          ></iframe>
        </div>
        <div class="h-[600px]">more form content</div>
      </div>
      <div class="h-[1200px] w-full bg-yellow-600 md:w-1/3">sidebar</div>
    </div>
  </body>
</html>
