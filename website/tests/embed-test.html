<html>

<head>
  <title>Embed Test</title>
  <link rel="stylesheet" href="../src/index.css" />
</head>

<script>
  window.addEventListener('iframe-is-listening', () => {
    console.log('window loaded');
    const iframe = document.querySelector('iframe');

    iframe.contentWindow.postMessage(
      {
        data: {
          UTM_X: 424000,
          UTM_Y: 4510000
        },
        iframeId: '1234'
      },
      'http://localhost:5173'
    );
  });

  window.addEventListener('message', (event) => {
    if (
      !event.data.iframeId
    ) {
      return;
    }

    console.log(
      "salesforce: event from iframe",
      JSON.stringify(event.data, null, 2)
    );
  });
</script>

<body class="bg-cyan-200">
  <div class="w-full md:w-1/2 lg:w-3/4 p-4 bg-white h-[2000px]">
    <div class="h-[700px]">
      <p class="h-40">A bunch of form content</p>
      <iframe src="./?embedded=true" style="border-color: rgb(201, 201, 201); border-width: 1px; border-style: solid;"
        width="100%" height="100%" frameborder="0" scrolling="no"></iframe>
      <p class="h-40">A bunch of form content</p>
    </div>
  </div>
</body>

</html>
